pipeline{
    agent any
    stages {
        stage('Clean-up'){
            steps{
                echo "Executing build #$BUILD_NUMBER. Deleting previous files"
                deleteDir()
            }
        }
        stage('Stage-A'){
            steps{
                echo "Running job $JOB_NAME "
            }
            post{
                success {
                    echo "Stage A success"
                }
                failure {
                    sh "Stage A failure"
                }
            }
        }
        stage ("Stage B - figlet") {
            steps {
                echo "Executing Figlet"
                sh 'figlet -c Pipeline works with figlet'
            }
            post {
                failure{
                    sh "apt-get update && apt-get install figlet"
                }
            } 
        }
    }
}